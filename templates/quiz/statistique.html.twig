{% extends '/bundles/EasyAdminBundle/default/layout.html.twig' %}

{% block main %}


    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://code.highcharts.com/modules/drilldown.js"></script>



    <script src="https://code.highcharts.com/highcharts-3d.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>

<style>
    .bg-red,
    .bg-yellow,
    .bg-aqua,
    .bg-blue,
    .bg-light-blue,
    .bg-green,
    .bg-navy,
    .bg-teal,
    .bg-olive,
    .bg-lime,
    .bg-orange,
    .bg-fuchsia,
    .bg-purple,
    .bg-maroon,
    .bg-black,
    .bg-red-active,
    .bg-yellow-active,
    .bg-aqua-active,
    .bg-blue-active,
    .bg-light-blue-active,
    .bg-green-active,
    .bg-navy-active,
    .bg-teal-active,
    .bg-olive-active,
    .bg-lime-active,
    .bg-orange-active,
    .bg-fuchsia-active,
    .bg-purple-active,
    .bg-maroon-active,
    .bg-black-active,
    .callout.callout-danger,
    .callout.callout-warning,
    .callout.callout-info,
    .callout.callout-success,
    .alert-success,
    .alert-danger,
    .alert-error,
    .alert-warning,
    .alert-info,
    .label-danger,
    .label-info,
    .label-warning,
    .label-primary,
    .label-success,
    .modal-primary .modal-body,
    .modal-primary .modal-header,
    .modal-primary .modal-footer,
    .modal-warning .modal-body,
    .modal-warning .modal-header,
    .modal-warning .modal-footer,
    .modal-info .modal-body,
    .modal-info .modal-header,
    .modal-info .modal-footer,
    .modal-success .modal-body,
    .modal-success .modal-header,
    .modal-success .modal-footer,
    .modal-danger .modal-body,
    .modal-danger .modal-header,
    .modal-danger .modal-footer {
        color: #fff !important;
    }
    .bg-gray {
        color: #000;
        background-color: #d2d6de !important;
    }
    .bg-gray-light {
        background-color: #f7f7f7;
    }
    .bg-black {
        background-color: #111111 !important;
    }
    .bg-red,
    .callout.callout-danger,
    .alert-danger,
    .alert-error,
    .label-danger,
    .modal-danger .modal-body {
        background-color: #dd4b39 !important;
    }
    .bg-yellow,
    .callout.callout-warning,
    .alert-warning,
    .label-warning,
    .modal-warning .modal-body {
        background-color: #f39c12 !important;
    }
    .bg-aqua,
    .callout.callout-info,
    .alert-info,
    .label-info,
    .modal-info .modal-body {
        background-color: #00c0ef !important;
    }
    .bg-blue {
        background-color: #0073b7 !important;
    }
    .bg-light-blue,
    .label-primary,
    .modal-primary .modal-body {
        background-color: #3c8dbc !important;
    }
    .bg-green,
    .callout.callout-success,
    .alert-success,
    .label-success,
    .modal-success .modal-body {
        background-color: #00a65a !important;
    }
    .bg-navy {
        background-color: #001f3f !important;
    }
    .bg-teal {
        background-color: #39cccc !important;
    }
    .bg-olive {
        background-color: #3d9970 !important;
    }
    .bg-lime {
        background-color: #01ff70 !important;
    }
    .bg-orange {
        background-color: #ff851b !important;
    }
    .bg-fuchsia {
        background-color: #f012be !important;
    }
    .bg-purple {
        background-color: #605ca8 !important;
    }
    .bg-maroon {
        background-color: #d81b60 !important;
    }
    .bg-gray-active {
        color: #000;
        background-color: #b5bbc8 !important;
    }
    .bg-black-active {
        background-color: #000000 !important;
    }
    .bg-red-active,
    .modal-danger .modal-header,
    .modal-danger .modal-footer {
        background-color: #d33724 !important;
    }
    .bg-yellow-active,
    .modal-warning .modal-header,
    .modal-warning .modal-footer {
        background-color: #db8b0b !important;
    }
    .bg-aqua-active,
    .modal-info .modal-header,
    .modal-info .modal-footer {
        background-color: #00a7d0 !important;
    }
    .bg-blue-active {
        background-color: #005384 !important;
    }
    .bg-light-blue-active,
    .modal-primary .modal-header,
    .modal-primary .modal-footer {
        background-color: #357ca5 !important;
    }
    .bg-green-active,
    .modal-success .modal-header,
    .modal-success .modal-footer {
        background-color: #008d4c !important;
    }
    .bg-navy-active {
        background-color: #001a35 !important;
    }
    .bg-teal-active {
        background-color: #30bbbb !important;
    }
    .bg-olive-active {
        background-color: #368763 !important;
    }
    .bg-lime-active {
        background-color: #00e765 !important;
    }
    .bg-orange-active {
        background-color: #ff7701 !important;
    }
    .bg-fuchsia-active {
        background-color: #db0ead !important;
    }
    .bg-purple-active {
        background-color: #555299 !important;
    }
    .bg-maroon-active {
        background-color: #ca195a !important;
    }

    .small-box {
        border-radius: 2px;
        position: relative;
        display: block;
        margin-bottom: 20px;
        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
    }
    .small-box > .inner {
        padding: 10px;
    }
    .small-box > .small-box-footer {
        position: relative;
        text-align: center;
        padding: 3px 0;
        color: #fff;
        color: rgba(255, 255, 255, 0.8);
        display: block;
        z-index: 10;
        background: rgba(0, 0, 0, 0.1);
        text-decoration: none;
    }
    .small-box > .small-box-footer:hover {
        color: #fff;
        background: rgba(0, 0, 0, 0.15);
    }
    .small-box h3 {
        font-size: 38px;
        font-weight: bold;
        margin: 0 0 10px 0;
        white-space: nowrap;
        padding: 0;
    }
    .small-box p {
        font-size: 15px;
    }
    .small-box p > small {
        display: block;
        color: #f9f9f9;
        font-size: 13px;
        margin-top: 5px;
    }
    .small-box h3,
    .small-box p {
        z-index: 5px;
        color: #fff;
    }
    .small-box .icon {
        -webkit-transition: all 0.3s linear;
        -o-transition: all 0.3s linear;
        transition: all 0.3s linear;
        position: absolute;
        top: -10px;
        right: 10px;
        z-index: 0;
        font-size: 90px;
        color: rgba(0, 0, 0, 0.15);
    }
    .small-box:hover {
        text-decoration: none;
        color: #f9f9f9;
    }
    .small-box:hover .icon {
        font-size: 95px;
    }
    @media (max-width: 767px) {
        .small-box {
            text-align: center;
        }
        .small-box .icon {
            display: none;
        }
        .small-box p {
            font-size: 12px;
        }
    }

    .small-box > .inner {
        padding: 10px;
    }

    .star-ratings {
        unicode-bidi: bidi-override;
        color: #ccc;
        /*font-size: 64px;*/
        position: relative;
        margin: 0;
        padding: 0;
    }
    .star-ratings .fill-ratings {
        color: #f2b600;
        padding: 0;
        position: absolute;
        z-index: 1;
        display: block;
        top: 0;
        left: 0;
        overflow: hidden;
    }
    .star-ratings .fill-ratings span {
        display: inline-block;
    }
    .star-ratings .empty-ratings {
        padding: 0;
        display: block;
        z-index: 0;
    }

    .ratings {
        position: relative;
        vertical-align: middle;
        display: inline-block;
        color: #bbb;
        overflow: hidden;
        letter-spacing: 3px;
    }
    .full-stars {
        position: absolute;
        left: 0;
        top: 0;
        white-space: nowrap;
        overflow: hidden;
        color: gold;
    }
    .empty-stars:before, .full-stars:before {
        content:"\2605\2605\2605\2605\2605";
    }
    .empty-stars:before {
        -webkit-text-stroke: 1px #bbb;
    }
    .full-stars:before {
        -webkit-text-stroke: 1px gold;
    }

</style>

    <br><br>
    <div class="row" style="padding: 9px;">
        <div class="col-3">
            <!-- small box -->
            <div class="small-box bg-aqua">
                <div class="inner">
                    <h3>{{ total_ratings }}</h3>

                    <p>Évaluations Totales</p>
                </div>
                <div class="icon">
                    <i class="ion-ribbon-b"></i>
                </div>
                <a class="small-box-footer">
                    <div class="ratings">
                        <div class="empty-stars"></div>
                        <div class="full-stars" style="width:{{ (total_ratings/5)*100 }}%"></div>
                    </div>
                </a>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-3">
            <!-- small box -->
            <div class="small-box bg-green">
                <div class="inner">
                    <h3>{{ tentatives }}</h3>

                    <p>Tontatives Totales</p>
                </div>
                <div class="icon">
                    <i class="ion ion-stats-bars"></i>
                </div>
                <a href="{{ path('historique') }}" class="small-box-footer">Plus d'info <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-3">
            <!-- small box -->
            <div class="small-box bg-yellow">
                <div class="inner">
                    <h3>{{ total_participants }}</h3>

                    <p>Participant(s) au Quiz</p>
                </div>
                <div class="icon">
                    <i class="ion ion-person-add"></i>
                </div>
                <a href="{{ path('easyadmin', {'entity': 'ParticipantQuiz', 'action': 'list'}) }}" class="small-box-footer">Plus d'info <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-3">
            <!-- small box -->
            <div class="small-box bg-red">
                <div class="inner">
                    <h3>{{ quizs }}</h3>

                    <p>Quiz</p>
                </div>
                <div class="icon">
                    <i class="ion-chatbubbles"></i>
                </div>
                <a href="{{ path('list_quiz') }}" class="small-box-footer">Plus d'info <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
    </div>

<br>
<br>
<br>

    <input type="hidden" id="userquiz" data-chart="{{ userquiz }}" />
    <input type="hidden" id="tentativesquiz" data-chart="{{ tentativesquiz }}" />
    <input type="hidden" id="ratings_names" data-chart="{{ ratings_names }}" />
    <input type="hidden" id="ratings_notes" data-chart="{{ ratings_notes }}" />

    <div id="container" style="min-width: 310px; height: 400px; margin-left: 5%; margin-right: 5%"></div>
    <br><hr><br>
    <div class="row" style="width: 100%">
        <div id="cc" style="min-width: 310px; height: 400px; margin: 0 auto; border-right: 1px solid #ccd6eb;" class="col-6"></div>
        <div id="dd" style="min-width: 310px; height: 400px; margin: 0 auto" class="col-6"></div>
    </div>

    <script>
        var userquiz = $('#userquiz').data('chart');
        // Create the chart
        Highcharts.chart('container', {
            chart: {
                type: 'column'
            },
            title: {
                text: 'Les 10 premières quiz ayant maximum participant'
            },
            subtitle: {
                text: new Date()
            },
            xAxis: {
                type: 'category'
            },
            yAxis: {
                title: {
                    text: 'Total participant'
                }

            },
            legend: {
                enabled: false
            },
            plotOptions: {
                series: {
                    borderWidth: 0,
                    dataLabels: {
                        enabled: true,
                        format: '{point.y}'
                    }
                }
            },

            tooltip: {
                headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                pointFormat: '<span style="color:{point.color}">{point.name}</span> <b> : {point.y}</b> participant(s)<br/>'
            },

            series: [
                {
                    name: "Quiz",
                    colorByPoint: true,
                    data: userquiz
                }
            ],


        });
    </script>


<script>
        var tentativesquiz = $('#tentativesquiz').data('chart');
        Highcharts.chart('cc', {
            chart: {
                type: 'pie',
                options3d: {
                    enabled: true,
                    alpha: 45,
                    beta: 0
                }
            },
            title: {
                text: 'Les 10 premières quiz ayant maximales tentatives'
            },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    depth: 35,
                    dataLabels: {
                        enabled: true,
                        format: '{point.name}'
                    }
                }
            },
            series: [{
                type: 'pie',
                name: 'Pourcentage Tentatives',
                data: tentativesquiz
            }]
        });
</script>



    <script>
        var ratings_names = $('#ratings_names').data('chart');
        var ratings_notes = $('#ratings_notes').data('chart');

        var dataRatings = [];

        ratings_names.forEach(function(element, key) {
            dataRatings.push([element, ratings_notes[key]]);
        });

        Highcharts.chart('dd', {
            chart: {
                type: 'column'
            },
            title: {
                text: 'Évaluation des quiz (note / 5)'
            },
            subtitle: {
                text: ''
            },
            xAxis: {
                type: 'category',
                labels: {
                    rotation: -45,
                    style: {
                        fontSize: '13px',
                        fontFamily: 'Verdana, sans-serif'
                    }
                }
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Moyenne sur 5'
                }
            },
            legend: {
                enabled: false
            },
            tooltip: {
                pointFormat: 'Moyenne des notes: <b>{point.y:.1f}</b>/5'
            },
            series: [{
                name: 'Population',
                data: dataRatings,
                dataLabels: {
                    enabled: true,
                    rotation: -90,
                    color: '#FFFFFF',
                    align: 'right',
                    format: '{point.y:.1f}', // one decimal
                    y: 10, // 10 pixels down from the top
                    style: {
                        fontSize: '13px',
                        fontFamily: 'Verdana, sans-serif'
                    }
                }
            }]
        });
</script>

{% endblock %}